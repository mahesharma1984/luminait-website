# Instructions for Claude

**Before doing any work, read `/docs/` first.**

Key documents:
- `DEV_GUIDE_Building_Prototypes_v2_0.md` - Core methodology
- `FRAMEWORK_Credence_Conversion_Touchpoints_v1_2.md` - Parent funnel strategy (supersedes methodology demo)
- `GUIDE_TEMPLATE_SPEC.md` - How guide pages work
- `GUIDE_EXTRACTION_CHECKLIST.md` - Creating new guides
- `FUNNEL_ARCHITECTURE_v2_0.md` - Two-funnel strategy (student + parent)
- `SITE_ARCHITECTURE_v2_0.md` - URL structure for both funnels
- `METHODOLOGY_DEMO_SPEC_v1_0.md` - Parent-facing demo page spec
- `UX_VALIDATION_CHECKLIST_v1_0.md` - Page development checklist

## Project Structure

```
/                           # Root HTML files (deployed)
├── index.html              # Homepage
├── course.html             # Course details
├── ...
│
├── site-config.json        # Shared config (SEO, contact, pricing)
│
├── /src/templates/         # Templates for build.js
├── build.js                # Generates main pages from templates
│
├── /templates/             # Templates for generate_site.py
├── generate_site.py        # Generates analysis guide pages
│
├── /components/            # Shared JS/CSS
├── /guides/                # Generated guide pages
├── /docs/                  # Methodology (READ FIRST)
```

## Workflow

1. **Main pages**: Edit `/src/templates/`, run `node build.js`
2. **Guide pages**: Edit `/templates/`, run `python generate_site.py`
3. **Config changes**: Edit `site-config.json`, rebuild affected pages

## Dev Guidelines (Added Jan 27, 2026)

### 1. Source of Truth
- **Root HTML files** (`index.html`, `course.html`, `progress.html`) are **READ-ONLY ARTIFACTS** generated by the build system.
- **NEVER** edit root files directly.
- **ALWAYS** edit `src/templates/` or configuration.
- **Incident**: On Jan 27, `progress.html` was manually updated in root but not in templates, causing `build.js` to overwrite the new design with the old one.

### 2. Measure First Protocol
- Before running destructive commands (like `node build.js`), **CHECK THE DIFF**.
- Compare the template against the live root file to ensure you aren't about to wipe out uncaptured progress.
- Reference: `docs/DEV_GUIDE_Building_Prototypes_v2_0.md`, Section 4.2 ("Measure First").

### 3. R/P Split (Reasoning vs Precision)
- **Problem**: LLMs are good at reasoning ("why this design works") but bad at precision ("copying 500 lines exactly").
- **Solution**: Use code for precision tasks (moving files, matching strings). Use Claude for reasoning.
- Reference: `docs/DEV_GUIDE_Building_Prototypes_v2_0.md`, Part 2.
